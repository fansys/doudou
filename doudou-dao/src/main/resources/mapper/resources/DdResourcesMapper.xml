<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.doudou.dao.mapper.resources.DdResourcesMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.doudou.dao.entity.resources.DdResources">
        <result column="id" property="id"/>
        <result column="create_date" property="createDate"/>
        <result column="update_date" property="updateDate"/>
        <result column="del_flag" property="delFlag"/>
        <result column="remark" property="remark"/>
        <result column="res_title" property="resTitle"/>
        <result column="res_auth" property="userId"/>
        <result column="res_publish" property="resPublish"/>
        <result column="res_upload_address" property="resUploadAddress"/>
        <result column="res_upload_num" property="resUploadNum"/>
        <result column="res_convert_integral" property="resConvertIntegral"/>
        <result column="res_summary" property="resSummary"/>
        <result column="res_type" property="resType"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id,
        create_date,
        update_date,
        del_flag,
        remark,
        res_title,
        user_id,
        res_publish,
        res_upload_address,
        res_upload_num,
        res_convert_integral,
        res_summary,
        res_type
    </sql>

    <select id="listPage" resultMap="BaseResultMap">
        select
            <include refid="Base_Column_List"/>
        from
            dd_resources dr
        <where>
            <if test="searchString != null and searchString != ''">
                dr.res_title like concat('%',#{searchString},'%')
                or
                dr.res_publish like concat('%',#{searchString},'%')
                or
                dr.res_summary like concat('%',#{searchString},'%')
                and dr.check_status = 1
            </if>
        </where>
    </select>

</mapper>
